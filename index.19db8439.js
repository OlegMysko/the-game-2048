function t(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}var e=/*#__PURE__*/function(){var e;function i(){!function(t,e){if(!(t instanceof e))throw TypeError("Cannot call a class as a function")}(this,i),this.score=0,this.state=[[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0]],this.status="idle"}return e=[{key:"spawnTile",value:function(){var e,n=[];this.state.forEach(function(t,e){t.forEach(function(t,r){0===t&&n.push([e,r])})});var r=Math.floor(Math.random()*n.length),s=function(t){if(Array.isArray(t))return t}(e=n[r])||function(t,e){var n,r,s=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=s){var i=[],o=!0,a=!1;try{for(s=s.call(t);!(o=(n=s.next()).done)&&(i.push(n.value),2!==i.length);o=!0);}catch(t){a=!0,r=t}finally{try{o||null==s.return||s.return()}finally{if(a)throw r}}return i}}(e,2)||function(e,n){if(e){if("string"==typeof e)return t(e,2);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return t(e,2)}}(e,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),i=s[0],o=s[1];this.state[i][o]=.9>Math.random()?2:4}},{key:"moveLeft",value:function(){var t=this;this.status="playing";var e=!1;if(this.state.forEach(function(n,r){for(var s=n.filter(function(t){return 0!==t}),i=[],o=[,,,,].fill(!1),u=0;u<s.length;u++)s[u]!==s[u+1]||o[u]||o[u+1]?i.push(s[u]):(i.push(2*s[u]),t.score+=2*s[u],o[u]=!0,u++,e=!0);for(;i.length<4;)i.push(0);a(n,i)||(e=!0);for(var c=0;c<4;c++)n[c]=i[c]}),e&&(this.spawnTile(),o()),this.checkWin()){this.status="win",document.querySelector(".message-win").classList.remove("hidden");return}this.checkLose()&&(this.status="lose",document.querySelector(".message-lose").classList.remove("hidden"))}},{key:"moveRight",value:function(){var t=this;this.status="playing";var e=!1;if(this.state.forEach(function(n){for(var r=n.filter(function(t){return 0!==t}),s=[],i=[,,,,].fill(!1),o=r.length-1;o>=0;o--)r[o]!==r[o-1]||i[o]||i[o-1]?s.unshift(r[o]):(s.unshift(2*r[o]),t.score+=2*r[o],i[o]=!0,o--,e=!0);for(;s.length<4;)s.unshift(0);a(n,s)||(e=!0);for(var u=0;u<4;u++)n[u]=s[u]}),e&&(this.spawnTile(),o()),this.checkWin()){this.status="win",document.querySelector(".message-win").classList.remove("hidden");return}this.checkLose()&&(this.status="lose",document.querySelector(".message-lose").classList.remove("hidden"))}},{key:"moveUp",value:function(){var t=this,e=function(e){for(var r=[],s=0;s<4;s++)r.push(t.state[s][e]);for(var i=r.filter(function(t){return 0!==t}),o=[],u=[,,,,].fill(!1),c=0;c<i.length;c++)i[c]!==i[c+1]||u[c]||u[c+1]?o.push(i[c]):(o.push(2*i[c]),t.score+=2*i[c],u[c]=!0,c++,n=!0);for(;o.length<4;)o.push(0);a(t.state.map(function(t){return t[e]}),o)||(n=!0);for(var l=0;l<4;l++)t.state[l][e]=o[l]};this.status="playing";for(var n=!1,r=0;r<4;r++)e(r);if(n&&(this.spawnTile(),o()),this.checkWin()){this.status="win",document.querySelector(".message-win").classList.remove("hidden");return}this.checkLose()&&(this.status="lose",document.querySelector(".message-lose").classList.remove("hidden"))}},{key:"moveDown",value:function(){var t=this,e=function(e){for(var r=[],s=0;s<4;s++)r.push(t.state[s][e]);for(var i=r.filter(function(t){return 0!==t}),o=[],u=[,,,,].fill(!1),c=i.length-1;c>=0;c--)i[c]!==i[c-1]||u[c]||u[c-1]?o.unshift(i[c]):(o.unshift(2*i[c]),t.score+=2*i[c],u[c]=!0,c--,n=!0);for(;o.length<4;)o.unshift(0);a(t.state.map(function(t){return t[e]}),o)||(n=!0);for(var l=0;l<4;l++)t.state[l][e]=o[l]};this.status="playing";for(var n=!1,r=0;r<4;r++)e(r);if(n&&(this.spawnTile(),o()),this.checkWin()){this.status="win",document.querySelector(".message-win").classList.remove("hidden");return}this.checkLose()&&(this.status="lose",document.querySelector(".message-lose").classList.remove("hidden"))}},{key:"getScore",value:function(){document.querySelector(".game-score").textContent=this.score}},{key:"getState",value:function(){return this.state}},{key:"getStatus",value:function(){return this.state}},{key:"start",value:function(){n.className="button restart",n.textContent="Restart",document.querySelector(".message-start").hidden=!0,r.spawnTile(),r.spawnTile(),o(),n.removeEventListener("click",s),this.status="playing"}},{key:"restart",value:function(){this.state=[[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0]],this.status="idle",this.score=0}},{key:"checkLose",value:function(){for(var t=0;t<4;t++)for(var e=0;e<4;e++)if(0===this.state[t][e]||e<3&&this.state[t][e]===this.state[t][e+1]||t<3&&this.state[t][e]===this.state[t+1][e])return!1;return!0}},{key:"checkWin",value:function(){return this.state.some(function(t){return t.includes(2048)})}}],function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}(i.prototype,e),i}(),n=document.querySelector(".start"),r=new e,s=function(){r.start(),n.removeEventListener("click",s),n.addEventListener("click",i,{once:!0})};n.addEventListener("click",s,{once:!0});var i=function(){r.restart(),o(),n.className="button start",n.textContent="Start",document.querySelector(".message-start").classList.remove("hidden"),document.querySelector(".message").classList.add("hidden"),document.querySelector(".message-win").classList.add("hidden"),n.removeEventListener("click",i),n.addEventListener("click",s,{once:!0})};function o(){var t=document.querySelectorAll(".field-cell"),e=0;r.getState().forEach(function(n){n.forEach(function(n){var r=t[e];r.textContent=0===n?"":n,r.className="field-cell",0!==n&&r.classList.add("field-cell--".concat(n)),e++})}),r.getScore(),r.getStatus()}function a(t,e){if(t.length!==e.length)return!1;for(var n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}document.addEventListener("keydown",function(t){"ArrowRight"===t.key&&r.moveRight(),"ArrowLeft"===t.key&&r.moveLeft(),"ArrowUp"===t.key&&r.moveUp(),"ArrowDown"===t.key&&r.moveDown()});
//# sourceMappingURL=index.19db8439.js.map
